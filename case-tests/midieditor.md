# MIDI 에디터 케이스 테스트

## 범위
- Split/Merge 모드 단축키 동작
- Split/Merge 실행 및 Undo/Redo
- 모드 전환 규칙

## 환경
- 브라우저: Chromium 계열, Firefox
- OS: Windows
- 앱: Vite 개발 서버

## 테스트 데이터
- MIDI 파트가 있는 프로젝트
- MIDI 에디터가 열려 있는 상태

## 테스트 케이스

### ME-001 Split 모드 해제 (3 -> 1)
사전조건: MIDI 에디터가 열려 있음
절차:
1. 3 키를 눌러 Split 모드를 켠다
2. 1 키를 눌러 모드를 종료한다
기대결과:
- Split 모드가 해제된다

### ME-002 Merge 모드 해제 (4 -> 1)
사전조건: MIDI 에디터가 열려 있음
절차:
1. 4 키를 눌러 Merge 모드를 켠다
2. 1 키를 눌러 모드를 종료한다
기대결과:
- Merge 모드가 해제된다

### ME-003 Split -> Merge 전환 (3 -> 4)
사전조건: MIDI 에디터가 열려 있음
절차:
1. 3 키를 눌러 Split 모드를 켠다
2. 4 키를 눌러 Merge 모드를 켠다
기대결과:
- Split 모드는 해제되고 Merge 모드가 활성화된다

### ME-004 Merge -> Split 전환 (4 -> 3)
사전조건: MIDI 에디터가 열려 있음
절차:
1. 4 키를 눌러 Merge 모드를 켠다
2. 3 키를 눌러 Split 모드를 켠다
기대결과:
- Merge 모드는 해제되고 Split 모드가 활성화된다

### ME-007 영구 Split 상태에서 Merge로 전환 (마우스 이동 중 3 -> 4)
사전조건: MIDI 에디터가 열려 있고 MIDI 파트 위에서 마우스를 이동할 수 있음
절차:
1. 3 키를 눌러 영구 Split 모드를 켠다
2. 마우스를 파트 위에서 움직여 스플릿 프리뷰가 보이는지 확인한다
3. 마우스를 움직이는 상태에서 4 키를 눌러 Merge 모드로 전환한다
기대결과:
- Split 모드는 해제되고 Merge 모드가 활성화된다

### ME-008 영구 Merge 상태에서 Split로 전환 (마우스 이동 중 4 -> 3)
사전조건: MIDI 에디터가 열려 있고 MIDI 파트 위에서 마우스를 이동할 수 있음
절차:
1. 4 키를 눌러 영구 Merge 모드를 켠다
2. 마우스를 파트 위에서 움직여 머지 모드가 유지되는지 확인한다
3. 마우스를 움직이는 상태에서 3 키를 눌러 Split 모드로 전환한다
기대결과:
- Merge 모드는 해제되고 Split 모드가 활성화된다

### ME-005 Split 실행 후 Undo/Redo
사전조건: MIDI 에디터에 분할 가능한 노트가 존재
절차:
1. Split을 실행한다
2. Ctrl+Z 또는 Cmd+Z로 Undo 한다
3. Ctrl+Y 또는 Ctrl+Shift+Z로 Redo 한다
기대결과:
- Undo로 분할이 되돌아온다
- Redo로 분할이 다시 적용된다

### ME-006 Merge 실행 후 Undo/Redo
사전조건: MIDI 에디터에 병합 가능한 노트가 존재
절차:
1. Merge를 실행한다
2. Ctrl+Z 또는 Cmd+Z로 Undo 한다
3. Ctrl+Y 또는 Ctrl+Shift+Z로 Redo 한다
기대결과:
- Undo로 병합이 되돌아온다
- Redo로 병합이 다시 적용된다

### ME-009 Quantize 상태에서 Split 미리보기/절단 위치 스냅
사전조건: Quantize가 활성화되어 있고 Split 모드를 사용할 수 있는 상태
절차:
1. Quantize를 활성화한다
2. Split 모드를 활성화한다
3. MIDI 에디터에서 노트 위로 마우스를 이동한다
4. 여러 위치에서 Split 미리보기 라인을 확인한다
5. Split을 실행한다
기대결과:
- Split 미리보기와 실제 절단 위치가 Quantize 그리드에 스냅된다

### ME-010 더블클릭으로 MIDI 에디터 진입 시 커서 기본 모드
사전조건: 이벤트 디스플레이에 MIDI 파트가 존재, 커서 모드가 null
절차:
1. MIDI 파트를 더블클릭하여 MIDI 에디터를 연다
기대결과:
- 커서가 기본 모드(null)로 유지된다

### ME-011 커서 모드 null에서만 더블클릭 진입
사전조건: 이벤트 디스플레이에 MIDI 파트가 존재
절차:
1. Split 또는 Merge 모드를 활성화한다
2. MIDI 파트를 더블클릭한다
3. 커서 모드를 null로 만든다
4. MIDI 파트를 더블클릭한다
기대결과:
- 커서 모드가 null이 아닐 때는 MIDI 에디터가 열리지 않는다
- 커서 모드가 null일 때만 MIDI 에디터가 열린다

### ME-012 Split 모드 단일 클릭 시 노트 생성 방지
사전조건: MIDI 에디터가 열려 있고 Split 모드가 활성화됨
절차:
1. 노트 그리드에서 단일 클릭한다
기대결과:
- 노트가 생성되지 않는다

### ME-013 축고정 모드: Alt 이동 스냅
사전조건: MIDI 에디터에서 노트를 드래그할 수 있는 상태
절차:
1. 노트를 클릭해 그립 상태로 만든다
2. Alt를 누른 채 대각선으로 드래그한다
기대결과:
- 이동이 상하 또는 좌우 축으로 스냅된다
- 더 많이 이동한 축 방향으로 스냅된다

### ME-014 축고정 모드: Ctrl+Alt 복제 이동
사전조건: MIDI 에디터에서 노트를 드래그할 수 있는 상태
절차:
1. 노트를 클릭해 그립 상태로 만든다
2. Ctrl+Alt를 누른 채 드래그한다
기대결과:
- 노트가 복제되면서 축고정 스냅이 적용된다

### ME-015 축고정 모드: Ctrl 유지 + Alt 토글
사전조건: MIDI 에디터에서 노트를 드래그할 수 있는 상태
절차:
1. Ctrl을 누른 상태로 드래그를 시작한다
2. 드래그 중 Alt를 여러 번 눌렀다 뗀다
기대결과:
- 축고정 모드가 정상적으로 동작한다
- Ctrl이 눌려 있어도 축고정이 적용된다

### ME-016 축고정 모드: 그립 이동 중 다른 MIDI 파트 Split 방지
사전조건: MIDI 에디터가 열려 있고 Split 모드가 활성화되어 있으며 이벤트 디스플레이에 다른 MIDI 파트가 존재
절차:
1. 노트를 클릭해 그립 상태로 만든다
2. Alt를 누른 채 드래그한다
3. 커서를 다른 MIDI 파트 위로 이동한다
기대결과:
- 다른 MIDI 파트에 Split 미리보기 라인이 나타나지 않는다
- 다른 MIDI 파트가 분할되지 않는다

### ME-017 노트 복제 (Ctrl + 드래그)
사전조건: MIDI 에디터가 열려 있고 노트가 존재
절차:
1. 노트를 클릭하여 선택한다 (그립 상태)
2. Ctrl 키를 누른 상태에서 노트를 드래그하여 다른 위치로 이동한다
3. 마우스를 놓는다
4. 툴바의 Duplicate 버튼에 flash 효과가 나타나는지 확인한다
기대결과:
- 원본 노트는 원래 위치에 그대로 유지된다
- 드래그한 위치에 새로운 노트가 생성된다 (복제된 노트)
- 복제된 노트는 원본 노트와 동일한 피치, 벨로시티, 길이를 가진다
- 툴바의 Duplicate 버튼에 일시적으로 파란색 flash 효과가 표시된다 (약 200ms)
- 여러 노트를 선택한 상태에서 Ctrl + 드래그하면 모든 선택된 노트가 복제된다

### ME-018 다중 노트 클론 후 언두: 모든 클론된 노트가 한 번에 제거
사전조건: MIDI 에디터가 열려 있고 노트가 2개 이상 존재
절차:
1. 여러 노트를 선택한다 (예: 노트1, 노트2, 노트3)
2. Ctrl 키를 누른 상태에서 선택된 노트들을 드래그하여 다른 위치로 이동한다 (클론)
3. 클론된 노트들이 생성되었는지 확인한다 (예: 노트4, 노트5, 노트6)
4. Ctrl+Z 또는 Cmd+Z로 Undo 한다
기대결과:
- 언두 한 번에 모든 클론된 노트(노트4, 노트5, 노트6)가 동시에 제거된다
- 원본 노트(노트1, 노트2, 노트3)는 그대로 유지된다
- 한 번 더 언두를 해야 하는 것이 아니라 한 번의 언두로 모든 클론이 제거된다